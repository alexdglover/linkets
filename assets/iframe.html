<html>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@zendeskgarden/css-tables@4.0.19/dist/index.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@zendeskgarden/css-buttons@7.0.19/dist/index.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@zendeskgarden/css-bedrock@8.0.0/dist/index.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@zendeskgarden/css-menus@9.0.20/dist/index.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link href="main.css" rel="stylesheet">
  <link href="loaders.css" rel="stylesheet">
</head>
<body>

  <div class="content">
    <div>
      <input style="width: 100%" class="c-txt__input" placeholder="Search for issues to link" type="text" id="linked-ticket-search" />
    </div>
    <div style="text-align: center; padding-top: 10px;">
      <button class="c-btn c-btn--primary" type="button" onclick="getSearchResults()">
        Search
      </button>
    </div>
    <div id="candidate-ticket-loading-icon" class="loader" style="display: none;"></div>
    <div class="content" id="candidate-tickets"></div>
  </div>

  <div class="content" id="content"></div>

  <script id="candidate-ticket-template" type="text/x-handlebars-template">
      <div class="linkedHeader">Possible Ticket(s)</div>
      {{#each ticket}}
        <div class="possibleTickets">
          <div class="l-btn-group u-mb-lg">
            <button class="linkButton js-menu"><img src="link.png" alt=""></button>
            <div class="u-position-relative">
              <ul aria-hidden="true" class="c-menu c-menu--up" role="menu" style="left:50px; top:-75px; min-width: 140px;">
                <li class="c-menu__item" onclick="linkTicket('{{id}}', 'blcks')" role="menuitem">Blocks</li>
                <li class="c-menu__item" onclick="linkTicket('{{id}}', 'blckdby')" role="menuitem">Blocked By</li>
                <li class="c-menu__item" onclick="linkTicket('{{id}}', 'prnt')" role="menuitem">Parent</li>
                <li class="c-menu__item" onclick="linkTicket('{{id}}', 'chld')" role="menuitem">Child</li>
                <li class="c-menu__item" onclick="linkTicket('{{id}}', 'rlts')" role="menuitem">Relates To</li>
              </ul>
            </div>
          </div>
          <div>
            <div>Ticket #{{id}} ({{status}})</div>
            <div><a href="#" onclick="openTicket('{{id}}')">{{subject}}</a></div>
          </div>
        </div>
      {{/each}}
  </script>

  <script id="linked-ticket-template" type="text/x-handlebars-template">
      <div class="linkedHeader">Linked Ticket(s)</div>
      {{#each ticket}}
        <div class="ticketContainer">
          <div><b>[{{relationship}}]</b> Ticket #{{id}}
            <button class="unlinkButton" onclick="unlinkTicket('{{id}}', '{{relationshipCode}}')"><img src="unlink.png" alt=""></button>
          </div>
          <div>Status: {{status}}</div>
          <div><a href="#" onclick="openTicket('{{id}}')">{{subject}}</a></div>
        </div>
      {{/each}}
  </script>

  <script id="error-template" type="text/x-handlebars-template">
    <p>Status - {{status}}</p>
    <p>{{statusText}} error.</p>
  </script>

  <script id="no-ticket-template" type="text/x-handlebars-template">
    <p style="text-align: center;">There are no linked tickets</p>
  </script>

  <script src="https://cdn.jsdelivr.net/handlebarsjs/4.0.8/handlebars.min.js"></script>
  <script>
    Handlebars.registerHelper("everyOther", function (index, amount, scope) {
        if ( ++index % amount)
            return scope.inverse(this);
        else
            return scope.fn(this);
    });
  </script>
  <script src="https://cdn.jsdelivr.net/jquery/3.2.1/jquery.min.js"></script>
  <script type="text/javascript" src="garden-svg4everybody.js"></script>
  <script type="text/javascript" src="garden-index.js"></script>
  <script type="text/javascript" src="https://static.zdassets.com/zendesk_app_framework_sdk/2.0/zaf_sdk.min.js"></script>
  <script type="text/javascript" src="main.js"></script>
</body>

</html>
